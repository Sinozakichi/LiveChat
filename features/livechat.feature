@livechat
Feature: 即時聊天功能
  作為一個使用者
  我希望能夠使用即時聊天功能與其他使用者交流
  以便能夠進行即時的溝通和訊息交換

  Scenario: 使用者成功連接到聊天室
    Given 聊天伺服器已啟動
    When 使用者打開聊天頁面
    Then 使用者應該看到連接成功的訊息
    And 使用者應該能看到聊天介面

  Scenario: 使用者發送訊息
    Given 使用者已連接到聊天室
    When 使用者在輸入框中輸入訊息 "你好，大家好！"
    And 使用者點擊發送按鈕
    Then 使用者應該在聊天室中看到自己發送的訊息 "你好，大家好！"
    And 輸入框應該被清空

  Scenario: 使用者接收其他人的訊息
    Given 使用者A和使用者B都已連接到聊天室
    When 使用者B發送訊息 "大家好，我是新來的！"
    Then 使用者A應該在聊天室中看到訊息 "大家好，我是新來的！"

  Scenario: 使用者嘗試發送空白訊息
    Given 使用者已連接到聊天室
    When 使用者在輸入框中輸入空白訊息 ""
    And 使用者點擊發送按鈕
    Then 使用者應該看到錯誤提示 "Message cannot be empty."
    And 訊息不應該被發送

  Scenario: 使用者按下Enter鍵發送訊息
    Given 使用者已連接到聊天室
    When 使用者在輸入框中輸入訊息 "使用Enter鍵發送"
    And 使用者按下Enter鍵
    Then 使用者應該在聊天室中看到自己發送的訊息 "使用Enter鍵發送"
    And 輸入框應該被清空

  Scenario: 使用者斷開連接後重新連接
    Given 使用者已連接到聊天室
    When 使用者關閉瀏覽器標籤
    And 使用者重新打開聊天頁面
    Then 使用者應該看到連接成功的訊息
    And 使用者應該能夠繼續發送和接收訊息

  Scenario: 多個使用者同時在聊天室交流
    Given 使用者A、B和C都已連接到聊天室
    When 使用者A發送訊息 "A的訊息"
    And 使用者B發送訊息 "B的訊息"
    And 使用者C發送訊息 "C的訊息"
    Then 所有使用者都應該看到這三條訊息
    And 訊息應該按照發送順序顯示

  Scenario: 伺服器重啟後使用者重新連接
    Given 聊天伺服器已啟動
    And 使用者已連接到聊天室
    When 伺服器重啟
    Then 使用者應該看到斷開連接的訊息
    And 當伺服器重新啟動後，使用者應該能夠自動重新連接
    And 使用者應該看到連接成功的訊息
